<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../static/bg.css">
    <link rel="stylesheet" href="../static/main.css">
    
    <script type="text/javascript" >
    
    const add = async function(){
       
        let url = document.getElementById('url').value;
        console.log(url);
        let valid = url.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g);
        if (valid){
        const tobe = `<div class="center">
        <div class="wave"></div>
        <div class="wave"></div>
        <div class="wave"></div>
        <div class="wave"></div>
        <div class="wave"></div>
        <div class="wave"></div>
        <div class="wave"></div>
        <div class="wave"></div>
        <div class="wave"></div>
        <div class="wave"></div>
    </div>`;

        document.getElementById('loading').innerHTML = tobe;
        const res = await postData('/post',{mes: url});
        document.getElementById('loading').innerHTML = "";
        document.getElementById('enter').innerText = res;
        console.log(res);
}
    else{
        alert('invalid URL')
    }

    }

    
    const postData = async ( url = '', data = {})=>{
    
    const response = await fetch(url, {
    method: 'POST', 
    credentials: 'same-origin', 
    headers: {
        'Content-Type': 'application/json',
    },
    body: JSON.stringify(data), 
  });

    try {
      const newData = await response.json();
      
      return newData;
    }catch(error) {
    console.log("error", error);
    }
};


    
    
    



   

    </script>
    <title>test successful</title>
</head>

<ul class="background">
    <li></li>
    <li></li>
    <li></li>
    
    <body>
        
        
        
        
        <div class="grid-container">
            
            <div class="grid-item ">
                <p>Enter the URL of the video:</p>
                <!-- <input type="text" id="url" name="fname" class="in"><br> -->
                <label class="field field_v3">
                    <input class="field__input" placeholder="e.g. https://www.youtube.com/watch?v=i5PtaCJJFjw" id="url">
                    <span class="field__label-wrap">
                      <span class="field__label">URL</span>
                    </span>
                  </label><br>
                <!-- <div class="submit"><input type = "button" onclick = "add()" value = "enter" class="date"></div> -->
                <button class="button-29" role="button" onclick="add()">Generate Summary</button>
                
            </div>
            <div class="grid-item grid-item-3">
                <div id="loading"></div>
                <p><strong>Summary:</strong></p>
                <p id="enter"></p>
            </div>
        </div>

        
    
    </body>
</ul>


 


</html>